# ESP32 OTA + LCD1602 + Telegram Bot + WebUI

–ü—Ä–æ—î–∫—Ç –¥–ª—è ESP32 –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é:

* OTA-–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ GitHub
* –í–∏–≤–æ–¥—É —Å—Ç–∞—Ç—É—Å—É –Ω–∞ LCD1602 I2C
* –ö–µ—Ä—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞
* –í–µ–±–ø–∞–Ω–µ–ª—ñ (WebUI) –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Å—Ç–∞—Ç—É—Å—É —Ç–∞ OTA

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
esp32-ota-lcd-web/
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îî‚îÄ‚îÄ config.h                # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Wi-Fi, Telegram, OTA
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.cpp                 # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ lcd_manager.cpp/.h       # –†–æ–±–æ—Ç–∞ –∑ LCD
‚îÇ   ‚îú‚îÄ‚îÄ wifi_manager.cpp/.h      # Wi-Fi –ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ telegram_bot.cpp/.h      # –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ ota_updater.cpp/.h       # OTA-–æ–Ω–æ–≤–ª–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ web_server.cpp/.h        # –í–µ–±—Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ index.html               # –í–µ–±—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ style.css
‚îÇ   ‚îî‚îÄ‚îÄ script.js
‚îú‚îÄ‚îÄ platformio.ini               # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è PlatformIO
‚îî‚îÄ‚îÄ README.md
```

---

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å **PlatformIO** —É Visual Studio Code.
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø—Ä–æ—î–∫—Ç:

   * **Board:** `esp32dev` –∞–±–æ `ESP32 Dev Module`
   * **Framework:** `Arduino`
3. –ó–∞–º—ñ–Ω—ñ—Ç—å `platformio.ini` –Ω–∞:

```ini
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600
board_build.filesystem = spiffs

lib_deps =
  bokeh/FastBot @ ^1.1.0
  milesburton/LiquidCrystal_I2C @ ^1.1.4
  bblanchon/ArduinoJson @ ^6.21.3
```

4. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å `include/config.h` —Å–≤–æ—ó–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏:

```cpp
#define WIFI_SSID "YourWiFi"
#define WIFI_PASSWORD "YourPass"
#define BOT_TOKEN "123456:ABC..."
#define CHAT_ID "123456"
#define OTA_URL "https://raw.githubusercontent.com/user/repo/main/firmware.bin"
#define FW_VERSION "v1.0.0"
```

---

## üöÄ –ó–∞–ø—É—Å–∫

1. **–ó–±—ñ—Ä–∫–∞ —Ç–∞ –ø—Ä–æ—à–∏–≤–∫–∞:**

```bash
pio run --target upload
```

2. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è WebUI —É SPIFFS:**

```bash
pio run --target uploadfs
```

3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Serial Monitor**, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ IP-–∞–¥—Ä–µ—Å—É ESP32:

```bash
pio device monitor
```

---

## üì± Telegram-–±–æ—Ç

–î–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:

* `/status` ‚Äî –ø–æ–∫–∞–∑—É—î IP —Ç–∞ –≤–µ—Ä—Å—ñ—é
* `/version` ‚Äî –ø–æ—Ç–æ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è –ø—Ä–æ—à–∏–≤–∫–∏
* `/update` ‚Äî –∑–∞–ø—É—Å–∫–∞—î OTA-–æ–Ω–æ–≤–ª–µ–Ω–Ω—è

---

## üåê WebUI

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:

```
http://<ESP_IP>
```

–î–æ—Å—Ç—É–ø–Ω–æ:

* –ü–µ—Ä–µ–≥–ª—è–¥ IP —Ç–∞ –≤–µ—Ä—Å—ñ—ó
* –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∑–∞–ø—É—Å–∫—É OTA (—É –º–∞–π–±—É—Ç–Ω—å–æ–º—É –º–æ–∂–Ω–∞ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏)

---

## üîß –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è LCD1602

| ESP32 | LCD1602 I2C |
|-------|-------------|
| 3.3V  | VCC         |
| GND   | GND         |
| GPIO21| SDA         |
| GPIO22| SCL         |

---

## üìã –§—É–Ω–∫—Ü—ñ—ó

### LCD –î–∏—Å–ø–ª–µ–π
- –ü–æ–∫–∞–∑—É—î —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î IP-–∞–¥—Ä–µ—Å—É
- –ü–æ–∫–∞–∑—É—î –≤–µ—Ä—Å—ñ—é –ø—Ä–æ—à–∏–≤–∫–∏
- –°—Ç–∞—Ç—É—Å OTA-–æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### Wi-Fi –ú–µ–Ω–µ–¥–∂–µ—Ä
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- –ü–µ—Ä–µ–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∏ –≤—Ç—Ä–∞—Ç—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å—É

### Telegram –ë–æ—Ç
- –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è
- –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ —Å—Ç–∞—Ç—É—Å
- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### OTA –û–Ω–æ–≤–ª–µ–Ω–Ω—è
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ URL
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ –æ–Ω–æ–≤–ª–µ–Ω—å
- –ë–µ–∑–ø–µ—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—à–∏–≤–∫–∏

### –í–µ–±—Å–µ—Ä–≤–µ—Ä
- REST API –¥–ª—è —Å—Ç–∞—Ç—É—Å—É
- –í–µ–±—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- SPIFFS –¥–ª—è —Ñ–∞–π–ª—ñ–≤

---

## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∫–æ–º–∞–Ω–¥ Telegram

–î–æ–¥–∞–π—Ç–µ –≤ `telegram_bot.cpp`:

```cpp
else if (message == "/newcommand") {
    bot->sendMessage(chatId.c_str(), "New command response");
}
```

### –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è WebUI

–î–æ–¥–∞–π—Ç–µ –Ω–æ–≤—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –≤ `web_server.cpp`:

```cpp
server->on("/newendpoint", HTTP_GET, [this]() { 
    handleNewEndpoint(); 
});
```

---

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License

---

## ü§ù –í–Ω–µ—Å–æ–∫

1. Fork –ø—Ä–æ—î–∫—Ç
2. –°—Ç–≤–æ—Ä—ñ—Ç—å feature branch
3. Commit –∑–º—ñ–Ω–∏
4. Push –¥–æ branch
5. –°—Ç–≤–æ—Ä—ñ—Ç—å Pull Request 